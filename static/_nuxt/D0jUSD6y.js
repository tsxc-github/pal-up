import{e as V,r as l,c as p,a as e,k as b,n as F,i as o,l as s,v as I,m as d,p as J,q as U,o as u,j as T,_}from"./D9zQjNKj.js";import{_ as A}from"./DHzlvNcZ.js";import{A as N}from"./BzSSBEFk.js";import{u as y}from"./CTY1i3uY.js";import"./BmxMjOzF.js";import"./B0Jj9cDs.js";const B={class:"login"},D={class:"navBar"},M={key:0,class:"module"},h={key:1,class:"module"},O={key:0,class:"text"},R=["src"],$={style:{display:"flex",width:"350px",margin:"0 auto",gap:"10px"}},j=V({__name:"login",setup(q){const n=l("login"),r=l(""),S=l(null);function E(){S.value?.click()}function P(i){const t=i.target.files[0];if(t){const a=new FormData;a.append("file",t),new N("/api/avatar").upload(a).then(C=>{r.value=C.avatar_id})}}const v=l(""),c=l(""),f=l(""),m=l("INTJ"),g=l(""),x=l("男");function k(){const i=y().waiting();new N("/api/account").post({avatar_id:r.value,email:v.value,password:c.value,nickname:f.value,mbti:m.value,birthyear:g.value,sex:x.value}).then(t=>{localStorage.setItem("account",JSON.stringify(t)),T().replace("/activities")}).catch(()=>{y().alert("注册失败！")}).finally(()=>{i.close()})}function w(){const i=y().waiting();new N("/api/account").get().then(t=>{localStorage.setItem("account",JSON.stringify(t)),T().replace("/activities")}).catch(()=>{y().alert("登录失败！")}).finally(()=>{i.close()})}return(i,t)=>(u(),p("div",B,[t[12]||(t[12]=e("header",null,[e("img",{src:A}),e("div",{class:"text"},"GoWith")],-1)),e("div",D,[e("div",{class:F(["nav",{actived:o(n)=="login"}]),onClick:t[0]||(t[0]=a=>n.value="login")},"登录",2),e("div",{class:F(["nav",{actived:o(n)=="register"}]),onClick:t[1]||(t[1]=a=>n.value="register")},"注册",2)]),o(n)=="login"?(u(),p("div",M,[t[8]||(t[8]=e("input",{class:"text-input",type:"text",placeholder:"邮箱"},null,-1)),t[9]||(t[9]=e("input",{class:"text-input",type:"text",placeholder:"密码"},null,-1)),e("div",{class:"button",onClick:w},"登录")])):b("",!0),o(n)=="register"?(u(),p("div",h,[e("div",{class:"avatar",onClick:E},[o(r)?(u(),p("img",{key:1,src:"/api/avatar?id="+o(r)},null,8,R)):(u(),p("div",O,"上传头像")),e("input",{ref_key:"rAvatarFileInput",ref:S,type:"file",style:{display:"none"},onChange:P},null,544)]),s(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>d(v)?v.value=a:null),class:"text-input",type:"text",placeholder:"邮箱"},null,512),[[I,o(v)]]),s(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>d(c)?c.value=a:null),class:"text-input",type:"text",placeholder:"密码"},null,512),[[I,o(c)]]),s(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>d(f)?f.value=a:null),class:"text-input",type:"text",placeholder:"昵称"},null,512),[[I,o(f)]]),e("div",$,[s(e("select",{"onUpdate:modelValue":t[5]||(t[5]=a=>d(m)?m.value=a:null),class:"text-input",style:{flex:"1 1 0"}},t[10]||(t[10]=[U('<option value="ESTJ" data-v-dbf0d366>ESTJ</option><option value="ESFJ" data-v-dbf0d366>ESFJ</option><option value="ESTP" data-v-dbf0d366>ESTP</option><option value="ESFP" data-v-dbf0d366>ESFP</option><option value="ISTJ" data-v-dbf0d366>ISTJ</option><option value="ISFJ" data-v-dbf0d366>ISFJ</option><option value="ISTP" data-v-dbf0d366>ISTP</option><option value="ISFP" data-v-dbf0d366>ISFP</option><option value="ENTJ" data-v-dbf0d366>ENTJ</option><option value="ENFJ" data-v-dbf0d366>ENFJ</option><option value="ENTP" data-v-dbf0d366>ENTP</option><option value="ENFP" data-v-dbf0d366>ENFP</option><option value="INTJ" data-v-dbf0d366>INTJ</option><option value="INFJ" data-v-dbf0d366>INFJ</option><option value="INTP" data-v-dbf0d366>INTP</option><option value="INFP" data-v-dbf0d366>INFP</option>',16)]),512),[[J,o(m)]]),s(e("select",{"onUpdate:modelValue":t[6]||(t[6]=a=>d(x)?x.value=a:null),class:"text-input",style:{flex:"1 1 0"}},t[11]||(t[11]=[e("option",{value:"男"},"男",-1),e("option",{value:"女"},"女",-1)]),512),[[J,o(x)]])]),s(e("input",{"onUpdate:modelValue":t[7]||(t[7]=a=>d(g)?g.value=a:null),class:"text-input",style:{flex:"1 1 0"},type:"number",placeholder:"出生年份"},null,512),[[I,o(g)]]),e("div",{class:"button",onClick:k},"注册")])):b("",!0)]))}}),L=_(j,[["__scopeId","data-v-dbf0d366"]]);export{L as default};
