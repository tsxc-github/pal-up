import{e as _,r as l,c as r,a as e,k as P,n as E,i as o,l as n,v as p,m as i,p as J,q as A,o as v,j as T,_ as B}from"./CnfyS1Dw.js";import{_ as D}from"./Cy-mulyr.js";import{A as b}from"./Bn-xpz7T.js";import{u as S}from"./BUAhGoZJ.js";import"./BubgwMEI.js";import"./BL-KpizT.js";const M={class:"login"},O={class:"navBar"},R={key:0,class:"module"},$={key:1,class:"module"},h={key:0,class:"text"},j=["src"],q={style:{display:"flex",width:"350px",margin:"0 auto",gap:"10px"}},z=_({__name:"login",setup(Y){const s=l("login"),c=l(""),F=l(null);function k(){F.value?.click()}function w(u){const t=u.target.files[0];if(t){const a=new FormData;a.append("file",t),new b("/api/avatar").upload(a).then(U=>{c.value=U.avatar_id})}}const d=l(""),m=l(""),f=l(""),g=l("INTJ"),x=l(""),I=l("男");function V(){const u=S().waiting();new b("/api/account").post({avatar_id:c.value,email:d.value,password:m.value,nickname:f.value,mbti:g.value,birthyear:x.value,sex:I.value}).then(t=>{localStorage.setItem("account",JSON.stringify(t)),T().replace("/activities")}).catch(()=>{S().alert("注册失败！")}).finally(()=>{u.close()})}const y=l(""),N=l("");function C(){const u=S().waiting();new b("/api/account").get({email:y.value,password:N.value}).then(t=>{localStorage.setItem("account",JSON.stringify(t)),T().replace("/activities")}).catch(()=>{S().alert("登录失败！")}).finally(()=>{u.close()})}return(u,t)=>(v(),r("div",M,[t[12]||(t[12]=e("header",null,[e("img",{src:D}),e("div",{class:"text"},"PalUp")],-1)),e("div",O,[e("div",{class:E(["nav",{actived:o(s)=="login"}]),onClick:t[0]||(t[0]=a=>s.value="login")},"登录",2),e("div",{class:E(["nav",{actived:o(s)=="register"}]),onClick:t[1]||(t[1]=a=>s.value="register")},"注册",2)]),o(s)=="login"?(v(),r("div",R,[n(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>i(y)?y.value=a:null),class:"text-input",type:"text",placeholder:"邮箱"},null,512),[[p,o(y)]]),n(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>i(N)?N.value=a:null),class:"text-input",type:"text",placeholder:"密码"},null,512),[[p,o(N)]]),e("div",{class:"button",onClick:C},"登录")])):P("",!0),o(s)=="register"?(v(),r("div",$,[e("div",{class:"avatar",onClick:k},[o(c)?(v(),r("img",{key:1,src:"/api/avatar?id="+o(c)},null,8,j)):(v(),r("div",h,"上传头像")),e("input",{ref_key:"rAvatarFileInput",ref:F,type:"file",style:{display:"none"},onChange:w},null,544)]),n(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>i(d)?d.value=a:null),class:"text-input",type:"text",placeholder:"邮箱"},null,512),[[p,o(d)]]),n(e("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>i(m)?m.value=a:null),class:"text-input",type:"text",placeholder:"密码"},null,512),[[p,o(m)]]),n(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>i(f)?f.value=a:null),class:"text-input",type:"text",placeholder:"昵称"},null,512),[[p,o(f)]]),e("div",q,[n(e("select",{"onUpdate:modelValue":t[7]||(t[7]=a=>i(g)?g.value=a:null),class:"text-input",style:{flex:"1 1 0"}},t[10]||(t[10]=[A('<option value="ESTJ" data-v-8cc22b73>ESTJ</option><option value="ESFJ" data-v-8cc22b73>ESFJ</option><option value="ESTP" data-v-8cc22b73>ESTP</option><option value="ESFP" data-v-8cc22b73>ESFP</option><option value="ISTJ" data-v-8cc22b73>ISTJ</option><option value="ISFJ" data-v-8cc22b73>ISFJ</option><option value="ISTP" data-v-8cc22b73>ISTP</option><option value="ISFP" data-v-8cc22b73>ISFP</option><option value="ENTJ" data-v-8cc22b73>ENTJ</option><option value="ENFJ" data-v-8cc22b73>ENFJ</option><option value="ENTP" data-v-8cc22b73>ENTP</option><option value="ENFP" data-v-8cc22b73>ENFP</option><option value="INTJ" data-v-8cc22b73>INTJ</option><option value="INFJ" data-v-8cc22b73>INFJ</option><option value="INTP" data-v-8cc22b73>INTP</option><option value="INFP" data-v-8cc22b73>INFP</option>',16)]),512),[[J,o(g)]]),n(e("select",{"onUpdate:modelValue":t[8]||(t[8]=a=>i(I)?I.value=a:null),class:"text-input",style:{flex:"1 1 0"}},t[11]||(t[11]=[e("option",{value:"男"},"男",-1),e("option",{value:"女"},"女",-1)]),512),[[J,o(I)]])]),n(e("input",{"onUpdate:modelValue":t[9]||(t[9]=a=>i(x)?x.value=a:null),class:"text-input",style:{flex:"1 1 0"},type:"number",placeholder:"出生年份"},null,512),[[p,o(x)]]),e("div",{class:"button",onClick:V},"注册")])):P("",!0)]))}}),X=B(z,[["__scopeId","data-v-8cc22b73"]]);export{X as default};
