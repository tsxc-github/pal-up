import{_ as h}from"./D3m2fLTH.js";import{_ as I}from"./ZmUhvJFd.js";import{_ as P}from"./zidwmWAL.js";import{e as x,c as o,o as n,b as m,a as r,t as B,_ as w,r as f,f as q,x as p,k as y,F as S,g as T,i as _,j as v,h as $}from"./CnfyS1Dw.js";import{u as d}from"./BUAhGoZJ.js";import{A as l}from"./Bn-xpz7T.js";import"./BubgwMEI.js";import"./BL-KpizT.js";const N={class:"card suggestionCard"},V=x({__name:"SugestionCard",props:{activity:{},userProfile:{},trip:{},text:{}},setup(g){const t=g;return(c,e)=>{const u=I,i=P;return n(),o("div",N,[m(u,{"user-profile":t.userProfile,style:{margin:"0","box-shadow":"none"}},null,8,["user-profile"]),e[1]||(e[1]=r("hr",null,null,-1)),m(i,{trip:t.trip,activity:t.activity,style:{margin:"0","box-shadow":"none"}},null,8,["trip","activity"]),e[2]||(e[2]=r("hr",null,null,-1)),r("div",{class:"text",onClick:e[0]||(e[0]=s=>s.target.classList.toggle("show"))},B(t.text),1)])}}}),j=Object.assign(w(V,[["__scopeId","data-v-d5a4da9b"]]),{__name:"SugestionCard"}),A={class:"suggestions"},F={key:0,class:"empty"},L=x({__name:"suggestions",setup(g){const t=f([]),c=f(!0);q(()=>{const i=d().waiting();Promise.all([new l("/api/suggestions").get({trip_id:p().query.tripId}).then(s=>{t.value=s}),new l("/api/trip/is_public").get({trip_id:p().query.tripId}).then(s=>{c.value=s})]).then(()=>{i.close()})});function e(){const i=d().waiting();new l("/api/trip/is_public").post({trip_id:p().query.tripId,is_public:!0}).finally(()=>{i.close(),v().replace("/my")})}function u(){const i=d().waiting();new l("/api/trip").delete({trip_id:p().query.tripId}).finally(()=>{i.close(),v().replace("/my")})}return(i,s)=>{const C=h,b=j;return n(),o("div",A,[m(C,{title:"匹配建议"}),r("div",{class:"del",onClick:u},"删除行程"),r("main",null,[(n(!0),o(S,null,T(_(t),(a,k)=>(n(),$(b,{key:k,activity:a.activity,trip:a.trip,text:a.suggestion,"user-profile":a.user},null,8,["activity","trip","text","user-profile"]))),128)),_(t).length==0?(n(),o("div",F,"空")):y("",!0),_(c)?y("",!0):(n(),o("div",{key:1,class:"button",onClick:e},"没找到合适的搭子，公布我的行程"))])])}}}),H=w(L,[["__scopeId","data-v-16dd7d51"]]);export{H as default};
