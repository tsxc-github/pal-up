import{_ as h}from"./DsUbastd.js";import{_ as I}from"./B6iGa9ow.js";import{_ as B}from"./B67IY8mG.js";import{e as x,c as o,o as i,b as _,a as n,t as P,_ as w,r as g,f as q,x as a,k as f,F as S,g as T,i as c,j as y,h as $}from"./D9zQjNKj.js";import{A as p}from"./BzSSBEFk.js";import{u as v}from"./CTY1i3uY.js";import"./BmxMjOzF.js";import"./B0Jj9cDs.js";const N={class:"card suggestionCard"},V=x({__name:"SugestionCard",props:{activity:{},userProfile:{},trip:{},text:{}},setup(d){const e=d;return(l,s)=>{const u=I,t=B;return i(),o("div",N,[_(u,{"user-profile":e.userProfile,style:{margin:"0","box-shadow":"none"}},null,8,["user-profile"]),s[1]||(s[1]=n("hr",null,null,-1)),_(t,{trip:e.trip,activity:e.activity,style:{margin:"0","box-shadow":"none"}},null,8,["trip","activity"]),s[2]||(s[2]=n("hr",null,null,-1)),n("div",{class:"text",onClick:s[0]||(s[0]=m=>m.target.classList.toggle("show"))},P(e.text),1)])}}}),j=Object.assign(w(V,[["__scopeId","data-v-d5a4da9b"]]),{__name:"SugestionCard"}),A={class:"suggestions"},F={key:0,class:"empty"},L=x({__name:"suggestions",setup(d){const e=g([]),l=g(!0);q(()=>{new p("/api/suggestions").get({trip_id:a().query.tripId}).then(t=>{e.value=t}),new p("/api/trip/is_public").get({trip_id:a().query.tripId}).then(t=>{l.value=t})});function s(){const t=v().waiting();new p("/api/trip/is_public").post({trip_id:a().query.tripId,is_public:!0}).finally(()=>{t.close(),y().push("/my")})}function u(){const t=v().waiting();new p("/api/trip").delete({trip_id:a().query.tripId}).finally(()=>{t.close(),y().replace("/my")})}return(t,m)=>{const C=h,b=j;return i(),o("div",A,[_(C,{title:"匹配建议"}),n("div",{class:"del",onClick:u},"删除行程"),n("main",null,[(i(!0),o(S,null,T(c(e),(r,k)=>(i(),$(b,{key:k,activity:r.activity,trip:r.trip,text:r.suggestion,"user-profile":r.user},null,8,["activity","trip","text","user-profile"]))),128)),c(e).length==0?(i(),o("div",F,"空")):f("",!0),c(l)?f("",!0):(i(),o("div",{key:1,class:"button",onClick:s},"没找到合适的搭子，公布我的行程"))])])}}}),H=w(L,[["__scopeId","data-v-c2088019"]]);export{H as default};
